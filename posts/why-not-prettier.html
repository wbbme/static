<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="author" content="Bob Wang"><meta http-equiv="X-UA-Compatible" content="chrome=1"><meta name="revisit-after" content="7 days"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="alternate" type="application/rss+xml" title="Bob Wang's Blog" href="/feed.xml"><meta name="msapplication-TileColor" content="#ffffff"><title>Why I don't use Prettier</title><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><script type="module" crossorigin="" src="/assets/app-NfkmQghJ.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-hL_ksGYg.css"><link rel="modulepreload" crossorigin="" href="/assets/why-not-prettier-GqK9aK8O.js"><meta property="og:title" content="Why I don't use Prettier"><meta name="twitter:title" content="Why I don't use Prettier"><meta name="description" content="The reason why I don't use Prettier in my projects."><meta property="og:description" content="The reason why I don't use Prettier in my projects."><meta name="twitter:description" content="The reason why I don't use Prettier in my projects."><meta property="og:image" content="https://antfu.me/og/why-not-prettier.png"><meta name="twitter:image" content="https://antfu.me/og/why-not-prettier.png"><meta name="twitter:card" content="summary_large_image"></head><body class="font-sans text-gray-700 dark:text-gray-200 relative"><div id="app" data-server-rendered="true"><!--[--><header class="header z-40" data-v-ca15ab0d=""><a href="/" class="absolute xl:fixed m-5 select-none outline-none" focusable="false" data-v-ca15ab0d=""><svg width="36" height="36" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-ca15ab0d="" data-v-5728e860=""><mask id="mask0_1299_11" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="11" y="18" width="77" height="64" data-v-5728e860=""><path d="M52.2536 75.2558C60.9986 80.2021 83.5148 80.2021 84.9522 68.4071C86.5287 55.4707 48.5788 43.042 47.3108 54.4868C46.0428 65.9317 84.1918 54.7097 83.0511 41.7732C81.9796 29.621 52.4649 26.3636 32.5417 37.9684C21.9604 44.1318 11.3085 56.2316 14.6122 69.929C17.2735 80.963 34.8266 82.2429 47.3108 71.0705C61.3382 58.517 64.7195 28.206 78.6674 21" stroke="black" stroke-width="4" stroke-linecap="round" data-v-5728e860=""></path></mask><g mask="url(#mask0_1299_11)" data-v-5728e860=""><path class="path1" d="M52.2536 75.2558C60.9986 80.2021 83.5148 80.2021 84.9522 68.4071C86.5287 55.4707 48.5788 43.042 47.3108 54.4868C46.0428 65.9317 84.1918 54.7097 83.0511 41.7732C81.9796 29.621 52.4649 26.3636 32.5417 37.9684C21.9604 44.1318 11.3085 56.2316 14.6122 69.929C17.2735 80.963 34.8266 82.2429 47.3108 71.0705C61.3382 58.517 64.7195 28.206 78.6674 21" stroke="black" stroke-width="4" stroke-linecap="round" data-v-5728e860=""></path></g></svg></a><button title="Scroll to top" fixed="" right-3="" bottom-3="" w-10="" h-10="" hover:op100="" rounded-full="" hover-bg-hex-8883="" transition="" duration-300="" z-100="" print:hidden="" class="op0! pointer-events-none" data-v-ca15ab0d=""><div i-ri-arrow-up-line="" data-v-ca15ab0d=""></div></button><nav class="nav" data-v-ca15ab0d=""><div class="spacer" data-v-ca15ab0d=""></div><div class="right" print:op0="" data-v-ca15ab0d=""><a href="/" class="" title="Home" data-v-ca15ab0d=""><span class="lt-md:hidden" data-v-ca15ab0d="">Home</span><div i-ri-article-line="" md:hidden="" data-v-ca15ab0d=""></div></a><a href="/posts" class="" title="Blog" data-v-ca15ab0d=""><span class="lt-md:hidden" data-v-ca15ab0d="">Blog</span><div i-ri-article-line="" md:hidden="" data-v-ca15ab0d=""></div></a><a href="/projects" class="" title="Projects" data-v-ca15ab0d=""><span class="lt-md:hidden" data-v-ca15ab0d="">Projects</span><div i-ri-lightbulb-line="" class="md:hidden" data-v-ca15ab0d=""></div></a><a href="/talks" class="lt-md:hidden" title="Talks" data-v-ca15ab0d="">Talks </a><a href="/podcasts" class="lt-md:hidden" title="Podcasts" data-v-ca15ab0d="">Podcasts </a><a href="/demos" class="" title="Demos" data-v-ca15ab0d=""><span class="lt-md:hidden" data-v-ca15ab0d="">Demos</span><div i-ri-screenshot-line="" class="md:hidden" data-v-ca15ab0d=""></div></a><a href="/chat" class="" title="Let's Chat" data-v-ca15ab0d=""><div i-ri-chat-1-line="" data-v-ca15ab0d=""></div></a><a href="/sponsors-list" class="" title="Sponsors" data-v-ca15ab0d=""><div i-ri-user-heart-line="" data-v-ca15ab0d=""></div></a><a href="https://github.com/wbbme" target="_blank" title="GitHub" class="lt-md:hidden" data-v-ca15ab0d=""><div i-uil-github-alt="" data-v-ca15ab0d=""></div></a><a href="https://twitter.com/wbbmex" target="_blank" title="Twitter" class="lt-md:hidden" data-v-ca15ab0d=""><div i-ri-twitter-x-fill="" data-v-ca15ab0d=""></div></a><a href="/feed.xml" target="_blank" title="RSS" class="lt-md:hidden" data-v-ca15ab0d=""><div i-la-rss-square="" style="font-size:1.25rem;margin:0 -.125rem" data-v-ca15ab0d=""></div></a><a class="select-none" title="Toggle Color Scheme" data-v-ca15ab0d=""><div i-ri-sun-line="" dark:i-ri-moon-line=""></div></a></div></nav></header><main class="px-7 py-10 of-x-hidden"><!--[--><!----><div class="prose m-auto mb-8"><h1 class="mb-0 slide-enter-50">Why I don't use Prettier</h1><p class="opacity-50 !-mt-6 slide-enter-50">Oct 1, 2022 <span>· 12min</span></p><!----><!----><!----></div><article class=""><!--[--><div class="prose m-auto slide-enter-content"><p></p><div class="table-of-contents"><div class="table-of-contents-anchor"><div class="i-ri-menu-2-fill"></div></div><ul><li><a href="#i-love-prettier">I Love Prettier</a></li><li><a href="#but-why-not">But, Why Not?</a><ul><li><a href="#it’s-opinionated">It’s Opinionated</a></li><li><a href="#the-line-wrapping-noise">The Line Wrapping Noise</a></li><li><a href="#mess-with-eslint">Mess with ESLint</a></li></ul></li><li><a href="#alternatives">Alternatives</a></li><li><a href="#wrapping-up">Wrapping Up</a></li></ul></div><p></p><blockquote><p><a href="/posts/why-not-prettier-zh">中文 Chinese Version</a></p></blockquote><p>I have started writing this post multiple times but never ended up posting it. I wasn’t able to figure out a proper way to express my position about Prettier. But this time, I think I should try harder to explain that for future reference.</p><p>First of all, I am not against Prettier. Actually, <strong>I love it</strong>.</p><h2 id="i-love-prettier" tabindex="-1">I Love Prettier <a class="header-anchor" href="#i-love-prettier" aria-hidden="true">#</a></h2><p><a href="https://prettier.io/" target="_blank" rel="noopener">Prettier</a> is a great tool, and it saved me a lot of time. I appreciated the efforts of the maintainers and contributors to make it possible and formed a great foundation of how the clean code would look for the community. I have to confess that the title is a bit clickbait. I use Prettier a lot for interactive documentation and playgrounds, like <a href="https://github.com/vueuse/vueuse/blob/c7dd1a48471d0a8b4f2b5a567baa12c24504eaee/scripts/utils.ts#L36-L46" target="_blank" rel="noopener">VueUse</a> and <a href="https://github.com/unocss/unocss/blob/7c332f235aff2045addb60c2668331a3ccfd1359/packages/inspector/client/composables/usePrettify.ts" target="_blank" rel="noopener">UnoCSS</a>. I love it for the out-of-box support of a lot of languages. I could make the generated code pretty with less than 5 mins of integrating Prettier.</p><h2 id="but-why-not" tabindex="-1">But, Why Not? <a class="header-anchor" href="#but-why-not" aria-hidden="true">#</a></h2><p>If you have ever come across my open source projects, you might find that I rarely use Prettier to format the source code. In this post, I would try to explain the reason why I made this decision:</p><h3 id="it’s-opinionated" tabindex="-1">It’s Opinionated <a class="header-anchor" href="#it’s-opinionated" aria-hidden="true">#</a></h3><p>Prettier describes itself to be <a href="https://github.com/prettier/prettier" target="_blank" rel="noopener">"an opinionated code formatter"</a>.</p><p><strong>Opinionated</strong> essentially means it’s not for everyone. Prettier makes a lot of hard-coded decisions to provide a minimal configuration interface. That makes it very easy to use (it’s excellent!) and the code consistent across projects. However, on the other hand, it also means you are losing the ability to have fine-grained tweaks to how your code should look like.</p><p>While I love most of Prettier’s decisions, it sometimes makes you upset when you find something you don’t want and don’t have a workaround.</p><h3 id="the-line-wrapping-noise" tabindex="-1">The Line Wrapping Noise <a class="header-anchor" href="#the-line-wrapping-noise" aria-hidden="true">#</a></h3><p>The main thing that itches me a lot is the auto wrapping / unwrapping based on the length of the code. Prettier has the concept of <a href="https://prettier.io/docs/en/options.html#print-width" target="_blank" rel="noopener"><code>printWidth</code></a>, which constrains each line to fit with a certain width (by default, it’s 80 characters). It’s generally great to have the code fitting in one screen and avoid horizontal scrolls.</p><p>However, I often found it hurting the readability and git diffing.</p><p><a href="https://twitter.com/patak_dev" target="_blank" rel="noopener">@patak_dev</a> recently brought up an example of that in PR reviewing:</p><div class=""><blockquote class="twitter-tweet" data-theme="light"><!--[--><p lang="en" dir="ltr">Formatters are awesome, especially when doing PR reviews. They also introduce issues though, for example when an addition triggers a line break. The diff isn't showing what changed here. It would be great if diff viewers would be Prettier-aware, counting line breaks as spacing. <a href="https://t.co/ZuApmctllU">pic.twitter.com/ZuApmctllU</a></p>— patak (@patak_dev) <a href="https://twitter.com/patak_dev/status/1575784199767859200?ref_src=twsrc%5Etfw">September 30, 2022</a><!--]--></blockquote></div><p>Sometimes when you modify a string literal in JavaScript that may make the line a bit longer than the value of <code>printwidth</code>, Prettier will force wrapping the line. It breaks the inline diffing and make the changes hard to review. Imagine in another pull request, we might reduce the string a bit shorter, Prettier will then unwrap the lines back to one line. Back and forth, it creates a lot of unnecessary noises.</p><p>The following image shows another example:</p><a href="https://prettier.io/playground/#N4Igxg9gdgLgprEAuc0DOMAEBXNcBOamAvJgNoA6UmmwOe+AkgCZKYCMANPQVAIYBbOGwogAggBsAZgEs4mAMJ98QiTJh9RmAL6cqNOrgIs2AJm5H8-ISJABxGf0wAlCGgAWfKFt37aPJlZMAGYLBmthTFEAZXdsAHNMADk+ACNsHz1qf0sTTAAWMN5BSNFnPncBL0wAMXw+Bky-QwY8gFYiqxLbABU3d3kAGQBPbFSEJuyW4yCANk6I22iCeJkIZJkJCCllSYBdAG4qEE4QCAAHGDWoNGRQZXwIAHcABWUEW5Q+CSe+YdvTql6mAANZwGDREqDRxwZA7CR4QHAsEQ858MCOeLIGD4bBwU5wATjZjMODMQZeeLYPjxOA1CAqPgwK5QLFfbAwCAnEDuGACCQAdXc6jgaDRYDgyxu6hkADd1MNkOA0ACQI4GDAXvV4lU4d9ESAAFZoAAe0UxEjgAEVsBB4HqEfiQGjCAQlak0nAJNzzvhHDABTJmDB3Mh8uZnY88AL6uclb7RQRZbDTgBHW3wLUXT4gBoAWigcDJZO5+Dg6ZkZa1NN1SHhBrwAhk2NxTrQFutGdhdf1To0qUDwdDSAjOL4m0xCggAlrIFFbW5Rh6aU+9adsrxjCgpNg0TAfsuYm30Rgw0tDrw2m0QA" target="_blank"><img src="/images/prettier-print-width.png" scale-110="" block="" m="b--5!"></a><p><sup><em>The 42 of <code>printWidth</code> is made up for demonstration, but it happens in any <code>printWidth</code></em></sup></p><p>On the left is the input code and on the right is the output of Prettier. I don’t need to point out but you probably already have the answer of which one is "more pretty". From my point of view, Prettier follows the rule too strict. And in fact it makes the code much harder to read and modify, violating the initial goal of formatting - to make the code more readable.</p><p>The real pain point is that this behavior is not optional. <strong>You can’t disable it completely</strong>(<a href="https://github.com/prettier/prettier/issues/3468" target="_blank" rel="noopener">#3468</a>). Increasing the <code>printWidth</code> only delays the circumstance and will affect other files that you didn’t touch. The only workaround you can do is to use <code>// prettier-ignore</code>, which to me, the "all or nothing" choice loses the point of using Prettier in the first place.</p><h3 id="mess-with-eslint" tabindex="-1">Mess with ESLint <a class="header-anchor" href="#mess-with-eslint" aria-hidden="true">#</a></h3><p>Prettier as a code formatter, only cares about code styles but not the logic. Thus we see it’s quite common for projects to use ESLint along with Prettier to also check the logic. If you have ever configured that yourself, you might notice there are some functionality overlaps between them - ESLint can also lint for code styles. The common practice is to use <a href="https://github.com/prettier/eslint-config-prettier" target="_blank" rel="noopener"><code>eslint-config-prettier</code></a> to disable those overlaps rules in ESLint (there are also <a href="https://prettier.io/docs/en/integrating-with-linters.html" target="_blank" rel="noopener">a few other solutions</a>).</p><p>However, the approach creates quite a lot of mess to me:</p><div class=""><blockquote class="twitter-tweet" data-theme="light" data-conversation="none"><!--[--><p lang="en" dir="ltr">My points here:<br><br>1. Prettier Only is cool - It's out-of-box.<br>2. If you need to use ESLint, it can do the formatting as good as Prettier - and more configurable</p>— Anthony Fu (@antfu7) <a href="https://twitter.com/antfu7/status/1279149211523538944?ref_src=twsrc%5Etfw">July 3, 2020</a><!--]--></blockquote></div><div class=""><blockquote class="twitter-tweet" data-theme="light" data-conversation="none"><!--[--><p lang="en" dir="ltr">3. Prettier + ESLint still needs a lot of configs - It doesn't make your life easier.<br>4. You can have full control in ESLint but not in Prettier, mixing them together feels weird.<br>5. I don't think parsing two times can be faster (maybe I am wrong)</p>— Anthony Fu (@antfu7) <a href="https://twitter.com/antfu7/status/1279149212974776320?ref_src=twsrc%5Etfw">July 3, 2020</a><!--]--></blockquote></div><p><a href="https://developer.ibm.com/articles/auto-fix-and-format-your-javascript-with-eslint/" target="_blank" rel="noopener">ESLint’s auto fix</a> could also do the formatting just as well as Prettier - with much more freedom of choices.</p><h2 id="alternatives" tabindex="-1">Alternatives <a class="header-anchor" href="#alternatives" aria-hidden="true">#</a></h2><p>ESLint is essential to my workflow to ensure the code quality. If ESLint is already capable of doing formatting, the best solution for me is to use it in one go.</p><p>I spent some time configuring my ESLint and made it a config preset:</p><span ws-nowrap=""><svg style="vertical-align:sub" class="inline inline-block" viewBox="0 0 32 32" width="1.2em" height="1.2em"><path fill="currentColor" fill-rule="evenodd" d="M16 2a14 14 0 0 0-4.43 27.28c.7.13 1-.3 1-.67v-2.38c-3.89.84-4.71-1.88-4.71-1.88a3.71 3.71 0 0 0-1.62-2.05c-1.27-.86.1-.85.1-.85a2.94 2.94 0 0 1 2.14 1.45a3 3 0 0 0 4.08 1.16a2.93 2.93 0 0 1 .88-1.87c-3.1-.36-6.37-1.56-6.37-6.92a5.4 5.4 0 0 1 1.44-3.76a5 5 0 0 1 .14-3.7s1.17-.38 3.85 1.43a13.3 13.3 0 0 1 7 0c2.67-1.81 3.84-1.43 3.84-1.43a5 5 0 0 1 .14 3.7a5.4 5.4 0 0 1 1.44 3.76c0 5.38-3.27 6.56-6.39 6.91a3.33 3.33 0 0 1 .95 2.59v3.84c0 .46.25.81 1 .67A14 14 0 0 0 16 2"></path></svg><a class="opacity-70 ml-1 font-mono" href="https://github.com/antfu/eslint-config" target="_blank">@antfu/eslint-config</a></span><p>It turns out, the setup configuration can also be very minimal:</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-bash"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">npm</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> i</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -D</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> @antfu/eslint-config</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-js"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// eslint.config.js</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> antfu</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">@antfu/eslint-config</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">'</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> default</span><span style="--s-dark:#80A665;--s-light:#59873A"> antfu</span><span style="--s-dark:#666666;--s-light:#999999">({</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // customizations</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">})</span></span>
<span class="line"></span></code></pre><p>That’s all you need. With the IDE extensions, it’s also possible to trigger auto fixing on save. It works similarly to Prettier but respects your choices when to break the lines, with many best practices of linting. It’s also quite opinionated, but thanks to the <a href="https://eslint.org/docs/latest/use/configure/configuration-files-new" target="_blank" rel="noopener">new Flat Config</a>, it gives you <a href="https://github.com/antfu/eslint-config#customization" target="_blank" rel="noopener">the full control of customizations</a> over every single bit that you want to change. Moreover, you can always fork it to make your own versions.</p><blockquote><p>Sidenote: You might hear so voicing saying "Don’t use ESLint for formatting" - <a href="https://github.com/eslint/eslint.org/issues/435" target="_blank" rel="noopener">here are some discussions and a response from the ESLint team</a>, for you to make your own judgement.</p></blockquote><h2 id="wrapping-up" tabindex="-1">Wrapping Up <a class="header-anchor" href="#wrapping-up" aria-hidden="true">#</a></h2><p>This post is only trying to explain my personal experience and opinions. Of course, you can have different views and don’t need to agree with me at all. I am not blaming Prettier for this. Different tools have different purposes and focuses, and there is no better or worse. It’s just about using the right tools for the right circumstances. I will still be a happy user of Prettier in usages that I don’t need the maximum customizability, and using ESLint exclusively for my projects’ source code.</p><p>Hope this could make myself clear and maybe give you some insights. Cheers!</p></div><!--]--></article><div class="prose m-auto mt-8 mb-8 slide-enter animate-delay-500 print:hidden"><!--[--><span font-mono="" op50="">&gt; </span><span op50="">comment on </span><a href="https://elk.zone/intent/post?text=Reading%20%40antfu%40m.webtoo.ls's%20https%3A%2F%2Fantfu.me%2Fposts%2Fwhy-not-prettier%0A%0AI%20think..." target="_blank" op50="">mastodon</a><span op25=""> / </span><a href="https://twitter.com/intent/tweet?text=Reading%20%40antfu7's%20https%3A%2F%2Fantfu.me%2Fposts%2Fwhy-not-prettier%0A%0AI%20think..." target="_blank" op50="">twitter</a><!--]--><br><span font-mono="" op50="">&gt; </span><a href="/posts" class="font-mono op50 hover:op75"></a></div><!--]--><div class="mt-10 mb-6 prose m-auto flex slide-enter animate-delay-1200!"><span class="text-sm op50"><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="color:inherit">CC BY-NC-SA 4.0</a> 2018 - 2024 © WBB.ME</span><div class="flex-auto"></div></div></main><!----><!--]--></div><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></body></html>
import{u as l,c as n,w as i,_ as r,o as p,a as s,d as t}from"./app-NfkmQghJ.js";const d=s("div",{class:"prose m-auto slide-enter-content"},[s("p",null,[t("When you build multiple entries in a single package, you exports them with "),s("code",null,"exports"),t(" syntax. Like")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-json"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"{")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'  "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"exports"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'    "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"."),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'      "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"types"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},' "'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"./dist/index.d.ts"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'      "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"import"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},' "'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"./dist/index.mjs"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'      "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"require"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},' "'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"./dist/index.cjs"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"')]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"    },")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'    "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"./foo"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'      "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"types"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},' "'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"./dist/foo.d.ts"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'      "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"import"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},' "'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"./dist/foo.mjs"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'      "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"require"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},' "'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"./dist/foo.cjs"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"')]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"    }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),t(`
`),s("span",{class:"line"})])]),s("p",null,[t("Then tho you provide "),s("code",null,"types"),t(" field for the sub modules, most of the users still got the error:")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-txt"},[s("span",{class:"line"},[s("span",null,"Cannot find module 'my-pkg/foo' or its corresponding type declarations.")]),t(`
`),s("span",{class:"line"},[s("span")])])]),s("p",null,[t("Well thatâ€™s because the "),s("code",null,"types"),t(" field in "),s("code",null,"exports"),t(" will only be resolved when you add "),s("code",null,'"moduleResolution": "NodeNext"'),t(" to the "),s("code",null,"tsconfig.json"),t(" file. Which might cause more issue since not all the packages are up to date.")]),s("p",null,[t("So when you trying to import "),s("code",null,"my-pkg/foo"),t(", TypeScript actually looking for the "),s("code",null,"foo.d.ts"),t(" file under your package root instead of your "),s("code",null,"dist"),t(" folder. One solution I been used for a long time is to create a redirection file that published to npm, like:")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-ts"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// foo.d.ts")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"export"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," default"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," from"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"./dist/foo.d.ts"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"export"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," *"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," from"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"./dist/foo.d.ts"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'")]),t(`
`),s("span",{class:"line"})])]),s("p",null,"Which solve the problem, but also making your root directory quite messy."),s("p",null,[t("Until "),s("a",{href:"https://github.com/tmkx",target:"_blank",rel:"noopener"},"@tmkx"),t(),s("a",{href:"https://github.com/antfu/unplugin-auto-import/pull/120",target:"_blank",rel:"noopener"},"shared me"),t(" this solution:")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-json"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"{")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'  "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"typesVersions"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'    "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"*"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'      "'),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"*"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," [")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'        "'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"./dist/index.d.ts"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'        "'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"./dist/*"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"')]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"      ]")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"    }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),t(`
`),s("span",{class:"line"})])]),s("p",null,[t("Good day! "),s("a",{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html#version-selection-with-typesversions",target:"_blank",rel:"noopener"},"Reference")])],-1),c={__name:"types-for-sub-modules",setup(o){const e={title:"Types for Submodules",date:"2021-03-01T16:00:00.000Z",lang:"en",duration:"5min",type:"note",image:"https://antfu.me/og/types-for-sub-modules.png",meta:[{property:"og:title",content:"Types for Submodules"},{name:"twitter:title",content:"Types for Submodules"},{property:"og:image",content:"https://antfu.me/og/types-for-sub-modules.png"},{name:"twitter:image",content:"https://antfu.me/og/types-for-sub-modules.png"},{name:"twitter:card",content:"summary_large_image"}]};return l({title:"Types for Submodules",meta:[{property:"og:title",content:"Types for Submodules"},{name:"twitter:title",content:"Types for Submodules"},{property:"og:image",content:"https://antfu.me/og/types-for-sub-modules.png"},{name:"twitter:image",content:"https://antfu.me/og/types-for-sub-modules.png"},{name:"twitter:card",content:"summary_large_image"}]}),(h,y)=>{const a=r;return p(),n(a,{frontmatter:e},{default:i(()=>[d]),_:1})}}};export{c as default};

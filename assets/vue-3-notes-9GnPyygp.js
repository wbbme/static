import{u as n,c as l,w as i,_ as r,o,a as s,d as e}from"./app-NfkmQghJ.js";const d=s("div",{class:"prose m-auto slide-enter-content"},[s("blockquote",null,[s("p",null,[e("Note: This is my personal notes/tips for migrating to Vue 3 and will be updated overtime. Please refer to "),s("a",{href:"https://v3.vuejs.org",target:"_blank",rel:"noopener"},"the official docs"),e(" for the complete changelog.")])]),s("p",null,"Sorted by the importance of my personal sense."),s("h3",{id:"ðŸ’«-use-markraw-for-vendor-objects",tabindex:"-1"},[e("ðŸ’« use "),s("code",null,"markRaw"),e(" for vendor objects "),s("a",{class:"header-anchor",href:"#ðŸ’«-use-markraw-for-vendor-objects","aria-hidden":"true"},"#")]),s("p",null,[e("The new reactivity system proxied the object passed to the Vue context. For vendor objects or class instances, you need to wrap it with "),s("code",null,"markRaw"),e(" in order to disable the reactivity injection.")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-ts"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// works in Vue 2")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"codemirror"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," CodeMirror"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"fromTextArea"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"el"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// in Vue 3 you need to use markRaw()")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// otherwise the CodeMirror won't work as expected")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"codemirror"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," markRaw"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"CodeMirror"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"fromTextArea"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"el"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"))")]),e(`
`),s("span",{class:"line"})])]),s("p",null,"I think this is a pretty tricky one. You wonâ€™t see any warn or error on initialization, but the internal state of the vendor object might be messed up. You might face errors that comes from the libraries while couldnâ€™t find out why (the example above took me one hour of debugging to find out)."),s("h3",{id:"ðŸ’«-sync-â†’-v-model",tabindex:"-1"},[e("ðŸ’« "),s("code",null,".sync"),e(" â†’ "),s("code",null,"v-model:"),e(),s("a",{class:"header-anchor",href:"#ðŸ’«-sync-â†’-v-model","aria-hidden":"true"},"#")]),s("p",null,[s("code",null,".sync"),e(" modifier is unified by "),s("code",null,"v-model:")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-vue"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"<!-- Vue 2 -->")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"<"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"Component"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," name"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"sync"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"name"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," />")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"<!-- Vue 3 -->")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"<"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"Component"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," v-model"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"name"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"name"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," />")]),e(`
`),s("span",{class:"line"})])]),s("p",null,[s("code",null,"v-model"),e(" on native element would be "),s("code",null,"value/input"),e(" while on custom components, it changed to "),s("code",null,"modelValue"),e(" and "),s("code",null,"update:modelValue")]),s("h3",{id:"ðŸ’«-shims-vue-d-ts",tabindex:"-1"},[e("ðŸ’« "),s("code",null,"shims-vue.d.ts"),e(),s("a",{class:"header-anchor",href:"#ðŸ’«-shims-vue-d-ts","aria-hidden":"true"},"#")]),s("blockquote",null,[s("p",null,[e("Update: now you can use "),s("a",{href:"https://github.com/znck/vue-developer-experience/tree/main/packages/typescript-plugin-vue",target:"_blank",rel:"noopener"},[s("code",null,"@vuedx/typescript-plugin-vue")]),e(" for better type inference with SFC (no need for "),s("code",null,"shims-vue.d.ts"),e(" then)")])]),s("p",null,"Changed to this:"),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-ts"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"declare"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," module"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"*.vue"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  import"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," defineComponent"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," from"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"vue"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  const "),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"Component"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},": "),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}},"ReturnType"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"<"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"typeof"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," defineComponent"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},">")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  export"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," default"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Component")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),e(`
`),s("span",{class:"line"})])])],-1),k={__name:"vue-3-notes",setup(p){const t={title:"Vue 3 Migration Notes",date:"2020-07-01T00:00:00.000Z",lang:"en",image:"https://antfu.me/og/vue-3-notes.png",meta:[{property:"og:title",content:"Vue 3 Migration Notes"},{name:"twitter:title",content:"Vue 3 Migration Notes"},{property:"og:image",content:"https://antfu.me/og/vue-3-notes.png"},{name:"twitter:image",content:"https://antfu.me/og/vue-3-notes.png"},{name:"twitter:card",content:"summary_large_image"}]};return n({title:"Vue 3 Migration Notes",meta:[{property:"og:title",content:"Vue 3 Migration Notes"},{name:"twitter:title",content:"Vue 3 Migration Notes"},{property:"og:image",content:"https://antfu.me/og/vue-3-notes.png"},{name:"twitter:image",content:"https://antfu.me/og/vue-3-notes.png"},{name:"twitter:card",content:"summary_large_image"}]}),(g,c)=>{const a=r;return o(),l(a,{frontmatter:t},{default:i(()=>[d]),_:1})}}};export{k as default};
